Tochka-test-task-2
========================

Реализация тестового задания №2 от компании tochka.ru 
на вакансию web-разработчика


Задача
-------

Воспользовавшись веб-сервисом на сайте http://www.cbr.ru/ загрузить 
динамику изменения курсов N любых  валют (например доллар США и Евро) 
за последние 3 года и сохранить их в базу данных. Предусмотреть 
ежедневное обновление этих данных.


Идея решения
-----------------

В задании не указано, что это должно быть оформлено как веб-сервис или 
веб-приложение, поэтому, для простоты будем считать, скрипты будут 
исполнятся в командной строке (терминале).

для ежедневного обновления динамики изменения курсов предполагается
использование cron'a или другого таск-менеджера который будет запускать
скрипт с необходимым параметром


Структура проекта
------------------

* *index.php*   - entry point;  
* *config.json* - файл с конфигурационными данными;
* **src/**      - каталог с исходными кодами классов используемых в скриптах;


формат конфига
---------------

конфиг находится в файле *config.json* в корне проекта.

формат:

{

    // период отслеживания динамки 
    // изменения курса валют
    // строка должна быть валидной для 
    // передачи в DateTime::modify() 
    // знак "-" указывать не нужно
    "periodLength": "3 year", 

    // дата конца периода
    // либо "now" - по сегодняшний день
    // либо дата в формате YYYY-MM-DD HH:MM:SS
    "endPeriodDate":   "now",

    // массив с внутренними
    // кодами валют Центробанка,
    // динамику которых необходимо отслеживать
    "currencyList": [

        "R01235", // доллар
        "R01239"  // евро
    ],

    // настройка соединения
    // c базой mysql
    "mysqlConfig": {

        "host":      "localhost",
        "db":        "tochka_cbr",
        "login":     "root",
        "password":  "root",
        "tableName": "currency_dynamic"
    }

{

параметры запуска
-----------------

скрипт обязательно должен запуститься с одним из параметров приведенных ниже.
Иначе выполнение скрипта завершится.


* **--export-new-data** - при запуске с этим параметром мы удаляем старую
  таблицу с динамикой изменения курсов валют, создаем новую пустую таблицу,
  выгружаем с веб-сервиса Центробанка динамику изменения валют указанных
  в конфиге;  

* **--update-current-data** - при запуске с этим параметром мы обновляем 
  динамику изменения курсов валют указанных в конфиге до текущей даты



